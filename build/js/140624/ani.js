(function(){var t;t={init:function(){this.config(),this.runAll()},config:function(){this.BORDERHEI=parseInt($(".J_border").css("height"))-30,this.LOGCSS="",this.COUNT=0},runAll:function(){this.addOneBall(),this.moveCircle(),this.clickEvent()},moveCircle:function(){var t;return t=this,$(".J_border").on("mousedown",".J_circle",function(){var n,e,r;return r=$(this),e=$(this)[0].offsetTop,n=event.pageY,$(this).addClass("clickCircle"),$(document).on("mousemove",function(i){var a,o;return o=i.pageY-n,a=e+o,0>a?void 0:a>t.BORDERHEI?(r.css({top:t.BORDERHEI+"px"}),void t.changeInputHei(t.BORDERHEI,r)):(r.css({top:a+"px"}),t.changeInputHei(a,r),t.calPer(a,r),void 0)}),$(document).on("mouseup",function(){return $(this).unbind("mousemove"),r.removeClass("clickCircle")})})},changeInputHei:function(t,n){var e,r;return e=n.attr("data-input"),r=n.attr("data-exit"),$("."+e).css("top",t),$("."+r).css("top",t)},calPer:function(t,n){var e;return e=parseInt(t/this.BORDERHEI*100),e>99?void 0:n.html(e)},addOneBall:function(){var t,n,e,r;t=this.COUNT++,n={cirId:t,color:this.getRandomCol()},e=this.tmpl("circle-tmpl",n),r=this.tmpl("input-tmpl",n),$(".J_border").find(".J_circle").removeClass("clickCircle"),$(".J_border").append(e),$(".J_inputFrm").append(r)},tmpl:function(t,n){var e,r,i;return r=document.getElementById(t),i=r.innerHTML,(e=doT.template(i))(n)},getRandomCol:function(){return"#"+("00000"+(16777215*Math.random()+.5>>0).toString(16)).slice(-6)},clickEvent:function(){var t;return t=this,$(".J_addBtn").click(function(){return t.addOneBall()}),$(".J_play").click(function(){var n,e,r,i,a;return i=t.getDataByPlay(),t.demo_animate(i),e=parseInt($(".J_duration").val()),r=$(".J_fun").val(),a=$(".J_repeat").val(),n={name:"animate",duration:e,timingFunction:r,delay:0,repeat:a,direction:"normal",fillMode:"forwards",complete:function(){}},$(".J_roundBall").playKeyframe(n)}),$(".J_resume").click(function(){return $(".J_roundBall").removeClass("boostKeyframe"),$(".J_roundBall").removeAttr("style")}),$(".J_log").click(function(){return alert("请打开控制台"),console.log(t.LOGCSS)}),$(document).on("click",".J_exitBtn",function(){var t,n,e;return n=$(this).attr("data-id"),e="J_input_"+n,t="J_circle_"+n,$("."+e).remove(),$("."+t).remove(),$(this).remove()})},getDataByPlay:function(){var t,n;return t=[],n=this,$(".J_circle").each(function(){var e,r,i,a,o,l;return o=$(this).html(),r=$(this).attr("data-input"),i=$("."+r),l=i.val(),a={},a.per=o,""===l?(i.addClass("blood"),!1):(e=n.genCssArr(l),a.attr=e,i.removeClass("blood"),t.push(a))}),t},genCssArr:function(t){var n,e,r,i,a;n=[],t.indexOf(!0)?n=t.split(";"):n.push(t),e=[];for(r in n)i=n[r],""!==i&&i.indexOf(!0)&&(a={key:i.split(":")[0],val:i.split(":")[1]},e.push(a));return e},demo_animate:function(t){var n,e,r,i,a,o,l,c,u,s,d;n=[],u={name:"animate"},d=this,d.LOGCSS="";for(a in t){e=t[a],l=e.per+"%",c={},i="",s=e.attr;for(o in s)r=s[o],c[r.key]=r.val,i=i+r.key+":"+r.val+";";d.LOGCSS=d.LOGCSS+l+" {"+i+"} ",u[l]=c}return d.LOGCSS="{"+d.LOGCSS+"}",n.push(u),$.keyframe.define(n)}},t.init()}).call(this);